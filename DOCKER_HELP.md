# üê≥ Docker Commands for boto-chronicler

## üöÄ Quick Start Commands

### Development
```bash
# –ó–∞–ø—É—Å–∫ –≤ DEV —Ä–µ–∂–∏–º–µ
./run_dev.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
docker compose up -d
```

### Production
```bash
# –ó–∞–ø—É—Å–∫ –≤ PROD —Ä–µ–∂–∏–º–µ
./run_prod.sh
```

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
docker compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose restart

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π
docker compose up -d --build

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ volumes
docker compose down -v
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f boto-chronicler

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
docker logs --tail 100 boto-chronicler

# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
docker logs --since 1h boto-chronicler
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker compose ps

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker inspect boto-chronicler

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats boto-chronicler

# –ü—Ä–æ—Ü–µ—Å—Å—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec boto-chronicler ps aux
```

### –û—Ç–ª–∞–¥–∫–∞
```bash
# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec -it boto-chronicler bash

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec boto-chronicler python -c "print('Hello from container')"

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker exec boto-chronicler env
```

## üîß –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–∞
```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ Git
git pull

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker compose down
docker compose build --no-cache
docker compose up -d
```

### –û—á–∏—Å—Ç–∫–∞
```bash
# –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã
docker image prune

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã
docker system prune

# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–±—Ä–∞–∑
docker rmi boto-chronicler:latest
```

### Backup –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
# –°–æ–∑–¥–∞—Ç—å backup –ª–æ–≥–æ–≤
tar -czf logs_backup_$(date +%Y%m%d_%H%M%S).tar.gz logs/

# –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
find logs/ -name "*.log" -mtime +7 -delete
```

## üö® Troubleshooting

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs boto-chronicler

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker compose config

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker exec boto-chronicler env | grep -E "(BOT_TOKEN|OPENAI|DATABASE)"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
docker network ls
docker network inspect boto-chronicler_default

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã
docker port boto-chronicler
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å volumes
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å mounted volumes
docker inspect boto-chronicler | grep -A 10 "Mounts"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–µ logs
ls -la logs/
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU –∏ –ø–∞–º—è—Ç–∏
docker stats boto-chronicler --no-stream

# –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
docker exec boto-chronicler cat /proc/meminfo
docker exec boto-chronicler cat /proc/cpuinfo
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –†–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤
du -sh logs/

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ –ª–æ–≥–∞—Ö
wc -l logs/*.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep -i error logs/bot.log
grep -i exception logs/bot.log
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### Cron –∑–∞–¥–∞—á–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
*/5 * * * * cd /path/to/boto-chronicler && docker compose ps | grep -q "Up" || ./run_prod.sh

# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
0 2 * * 0 cd /path/to/boto-chronicler && find logs/ -name "*.log" -mtime +7 -delete
```

### Health check —Å–∫—Ä–∏–ø—Ç
```bash
#!/bin/bash
# health_check.sh
if ! docker compose ps | grep -q "Up"; then
    echo "Container is down, restarting..."
    ./run_prod.sh
fi
```

## üìù –ü–æ–ª–µ–∑–Ω—ã–µ –∞–ª–∏–∞—Å—ã

–î–æ–±–∞–≤—å—Ç–µ –≤ `~/.bashrc` –∏–ª–∏ `~/.zshrc`:
```bash
alias boto-logs='docker logs -f boto-chronicler'
alias boto-status='docker compose ps'
alias boto-restart='docker compose restart'
alias boto-stop='docker compose down'
alias boto-start='./run_prod.sh'
```
